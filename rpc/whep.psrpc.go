// Code generated by protoc-gen-psrpc v0.5.1, DO NOT EDIT.
// source: rpc/whep.proto

package rpc

import (
	"context"

	"github.com/livekit/psrpc"
	"github.com/livekit/psrpc/pkg/client"
	"github.com/livekit/psrpc/pkg/info"
	"github.com/livekit/psrpc/pkg/rand"
	"github.com/livekit/psrpc/pkg/server"
	"github.com/livekit/psrpc/version"
)
import google_protobuf "google.golang.org/protobuf/types/known/emptypb"

var _ = version.PsrpcVersion_0_5

// =============================
// WHEPInternal Client Interface
// =============================

type WHEPInternalClient interface {
	StartWHEP(ctx context.Context, req *StartWHEPRequest, opts ...psrpc.RequestOption) (*StartWHEPResponse, error)
}

// =================================
// WHEPInternal ServerImpl Interface
// =================================

type WHEPInternalServerImpl interface {
	StartWHEP(context.Context, *StartWHEPRequest) (*StartWHEPResponse, error)
	StartWHEPAffinity(context.Context, *StartWHEPRequest) float32
}

// =============================
// WHEPInternal Server Interface
// =============================

type WHEPInternalServer interface {

	// Close and wait for pending RPCs to complete
	Shutdown()

	// Close immediately, without waiting for pending RPCs
	Kill()
}

// ===================
// WHEPInternal Client
// ===================

type wHEPInternalClient struct {
	client *client.RPCClient
}

// NewWHEPInternalClient creates a psrpc client that implements the WHEPInternalClient interface.
func NewWHEPInternalClient(bus psrpc.MessageBus, opts ...psrpc.ClientOption) (WHEPInternalClient, error) {
	sd := &info.ServiceDefinition{
		Name: "WHEPInternal",
		ID:   rand.NewClientID(),
	}

	sd.RegisterMethod("StartWHEP", true, false, true, false)

	rpcClient, err := client.NewRPCClient(sd, bus, opts...)
	if err != nil {
		return nil, err
	}

	return &wHEPInternalClient{
		client: rpcClient,
	}, nil
}

func (c *wHEPInternalClient) StartWHEP(ctx context.Context, req *StartWHEPRequest, opts ...psrpc.RequestOption) (*StartWHEPResponse, error) {
	return client.RequestSingle[*StartWHEPResponse](ctx, c.client, "StartWHEP", nil, req, opts...)
}

// ===================
// WHEPInternal Server
// ===================

type wHEPInternalServer struct {
	svc WHEPInternalServerImpl
	rpc *server.RPCServer
}

// NewWHEPInternalServer builds a RPCServer that will route requests
// to the corresponding method in the provided svc implementation.
func NewWHEPInternalServer(svc WHEPInternalServerImpl, bus psrpc.MessageBus, opts ...psrpc.ServerOption) (WHEPInternalServer, error) {
	sd := &info.ServiceDefinition{
		Name: "WHEPInternal",
		ID:   rand.NewServerID(),
	}

	s := server.NewRPCServer(sd, bus, opts...)

	sd.RegisterMethod("StartWHEP", true, false, true, false)
	var err error
	err = server.RegisterHandler(s, "StartWHEP", nil, svc.StartWHEP, svc.StartWHEPAffinity)
	if err != nil {
		s.Close(false)
		return nil, err
	}

	return &wHEPInternalServer{
		svc: svc,
		rpc: s,
	}, nil
}

func (s *wHEPInternalServer) Shutdown() {
	s.rpc.Close(false)
}

func (s *wHEPInternalServer) Kill() {
	s.rpc.Close(true)
}

// ============================
// WHEPHandler Client Interface
// ============================

type WHEPHandlerClient interface {
	ICETrickle(ctx context.Context, topic string, req *ICETrickleRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error)

	ICERestart(ctx context.Context, topic string, req *ICERestartWHIPResourceRequest, opts ...psrpc.RequestOption) (*ICERestartWHIPResourceResponse, error)

	DeleteWHEP(ctx context.Context, topic string, req *DeleteWHEPRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error)
}

// ================================
// WHEPHandler ServerImpl Interface
// ================================

type WHEPHandlerServerImpl interface {
	ICETrickle(context.Context, *ICETrickleRequest) (*google_protobuf.Empty, error)

	ICERestart(context.Context, *ICERestartWHIPResourceRequest) (*ICERestartWHIPResourceResponse, error)

	DeleteWHEP(context.Context, *DeleteWHEPRequest) (*google_protobuf.Empty, error)
}

// ============================
// WHEPHandler Server Interface
// ============================

type WHEPHandlerServer interface {
	RegisterICETrickleTopic(topic string) error
	DeregisterICETrickleTopic(topic string)
	RegisterICERestartTopic(topic string) error
	DeregisterICERestartTopic(topic string)
	RegisterDeleteWHEPTopic(topic string) error
	DeregisterDeleteWHEPTopic(topic string)
	RegisterAllResuourceTopics(topic string) error
	DeregisterAllResuourceTopics(topic string)

	// Close and wait for pending RPCs to complete
	Shutdown()

	// Close immediately, without waiting for pending RPCs
	Kill()
}

// ==================
// WHEPHandler Client
// ==================

type wHEPHandlerClient struct {
	client *client.RPCClient
}

// NewWHEPHandlerClient creates a psrpc client that implements the WHEPHandlerClient interface.
func NewWHEPHandlerClient(bus psrpc.MessageBus, opts ...psrpc.ClientOption) (WHEPHandlerClient, error) {
	sd := &info.ServiceDefinition{
		Name: "WHEPHandler",
		ID:   rand.NewClientID(),
	}

	sd.RegisterMethod("ICETrickle", false, false, true, true)
	sd.RegisterMethod("ICERestart", false, false, true, true)
	sd.RegisterMethod("DeleteWHEP", false, false, true, true)

	rpcClient, err := client.NewRPCClient(sd, bus, opts...)
	if err != nil {
		return nil, err
	}

	return &wHEPHandlerClient{
		client: rpcClient,
	}, nil
}

func (c *wHEPHandlerClient) ICETrickle(ctx context.Context, topic string, req *ICETrickleRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error) {
	return client.RequestSingle[*google_protobuf.Empty](ctx, c.client, "ICETrickle", []string{topic}, req, opts...)
}

func (c *wHEPHandlerClient) ICERestart(ctx context.Context, topic string, req *ICERestartWHIPResourceRequest, opts ...psrpc.RequestOption) (*ICERestartWHIPResourceResponse, error) {
	return client.RequestSingle[*ICERestartWHIPResourceResponse](ctx, c.client, "ICERestart", []string{topic}, req, opts...)
}

func (c *wHEPHandlerClient) DeleteWHEP(ctx context.Context, topic string, req *DeleteWHEPRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error) {
	return client.RequestSingle[*google_protobuf.Empty](ctx, c.client, "DeleteWHEP", []string{topic}, req, opts...)
}

// ==================
// WHEPHandler Server
// ==================

type wHEPHandlerServer struct {
	svc WHEPHandlerServerImpl
	rpc *server.RPCServer
}

// NewWHEPHandlerServer builds a RPCServer that will route requests
// to the corresponding method in the provided svc implementation.
func NewWHEPHandlerServer(svc WHEPHandlerServerImpl, bus psrpc.MessageBus, opts ...psrpc.ServerOption) (WHEPHandlerServer, error) {
	sd := &info.ServiceDefinition{
		Name: "WHEPHandler",
		ID:   rand.NewServerID(),
	}

	s := server.NewRPCServer(sd, bus, opts...)

	sd.RegisterMethod("ICETrickle", false, false, true, true)
	sd.RegisterMethod("ICERestart", false, false, true, true)
	sd.RegisterMethod("DeleteWHEP", false, false, true, true)
	return &wHEPHandlerServer{
		svc: svc,
		rpc: s,
	}, nil
}

func (s *wHEPHandlerServer) RegisterICETrickleTopic(topic string) error {
	return server.RegisterHandler(s.rpc, "ICETrickle", []string{topic}, s.svc.ICETrickle, nil)
}

func (s *wHEPHandlerServer) DeregisterICETrickleTopic(topic string) {
	s.rpc.DeregisterHandler("ICETrickle", []string{topic})
}

func (s *wHEPHandlerServer) RegisterICERestartTopic(topic string) error {
	return server.RegisterHandler(s.rpc, "ICERestart", []string{topic}, s.svc.ICERestart, nil)
}

func (s *wHEPHandlerServer) DeregisterICERestartTopic(topic string) {
	s.rpc.DeregisterHandler("ICERestart", []string{topic})
}

func (s *wHEPHandlerServer) RegisterDeleteWHEPTopic(topic string) error {
	return server.RegisterHandler(s.rpc, "DeleteWHEP", []string{topic}, s.svc.DeleteWHEP, nil)
}

func (s *wHEPHandlerServer) DeregisterDeleteWHEPTopic(topic string) {
	s.rpc.DeregisterHandler("DeleteWHEP", []string{topic})
}

func (s *wHEPHandlerServer) allResuourceTopicRegisterers() server.RegistererSlice {
	return server.RegistererSlice{
		server.NewRegisterer(s.RegisterICETrickleTopic, s.DeregisterICETrickleTopic),
		server.NewRegisterer(s.RegisterICERestartTopic, s.DeregisterICERestartTopic),
		server.NewRegisterer(s.RegisterDeleteWHEPTopic, s.DeregisterDeleteWHEPTopic),
	}
}

func (s *wHEPHandlerServer) RegisterAllResuourceTopics(topic string) error {
	return s.allResuourceTopicRegisterers().Register(topic)
}

func (s *wHEPHandlerServer) DeregisterAllResuourceTopics(topic string) {
	s.allResuourceTopicRegisterers().Deregister(topic)
}

func (s *wHEPHandlerServer) Shutdown() {
	s.rpc.Close(false)
}

func (s *wHEPHandlerServer) Kill() {
	s.rpc.Close(true)
}

var psrpcFileDescriptor9 = []byte{
	// 468 bytes of a gzipped FileDescriptorProto
	0x1f, 0x8b, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0xff, 0x94, 0x53, 0xcd, 0x6e, 0xd3, 0x40,
	0x10, 0x96, 0x9b, 0x10, 0x35, 0x93, 0x16, 0x9a, 0x85, 0x46, 0x91, 0x91, 0x68, 0x70, 0x2f, 0x9c,
	0x6c, 0x54, 0x78, 0x00, 0x04, 0x0d, 0x4a, 0x24, 0x0e, 0x34, 0x14, 0x55, 0xe2, 0x12, 0x6d, 0xd6,
	0x13, 0x77, 0x89, 0xb3, 0xbb, 0xcc, 0xae, 0xb1, 0x78, 0x84, 0x3e, 0x00, 0x67, 0xde, 0xa1, 0x4f,
	0x88, 0xfc, 0xd7, 0x44, 0x2d, 0xa2, 0xea, 0xf1, 0xfb, 0x66, 0xf6, 0x9b, 0x6f, 0x3e, 0x8f, 0xe1,
	0x31, 0x19, 0x11, 0xe5, 0x97, 0x68, 0x42, 0x43, 0xda, 0x69, 0xd6, 0x22, 0x23, 0xfc, 0x7d, 0x6d,
	0x9c, 0xd4, 0xca, 0x56, 0x9c, 0xdf, 0x2f, 0x7a, 0xa4, 0x4a, 0x08, 0x6d, 0x43, 0x3d, 0x4f, 0xb4,
	0x4e, 0x52, 0x8c, 0x4a, 0xb4, 0xc8, 0x96, 0x11, 0xae, 0x8d, 0xfb, 0x55, 0x15, 0x83, 0x1c, 0x0e,
	0xbe, 0x38, 0x4e, 0xee, 0x62, 0x32, 0xfe, 0x3c, 0xc3, 0x1f, 0x19, 0x5a, 0xc7, 0x9e, 0xc1, 0x23,
	0xa7, 0x57, 0xa8, 0x86, 0xde, 0xc8, 0x7b, 0xd5, 0x9d, 0x55, 0x80, 0x1d, 0x42, 0x27, 0xb7, 0xf3,
	0x8c, 0xd2, 0xe1, 0x4e, 0x45, 0xe7, 0xf6, 0x2b, 0xa5, 0x6c, 0x04, 0x3d, 0xc3, 0xc9, 0x49, 0x21,
	0x0d, 0x57, 0x6e, 0xd8, 0x2a, 0x6b, 0xdb, 0x54, 0x21, 0xa7, 0x97, 0x4b, 0xa4, 0x61, 0xbb, 0x7a,
	0x57, 0x82, 0xe0, 0x13, 0xf4, 0xb7, 0x06, 0x5b, 0xa3, 0x95, 0x45, 0x76, 0x04, 0x3d, 0x42, 0xab,
	0x33, 0x12, 0x38, 0x97, 0x71, 0x3d, 0x1f, 0x1a, 0x6a, 0x1a, 0xb3, 0x01, 0x74, 0xb8, 0xb2, 0x39,
	0x52, 0x6d, 0xa2, 0x46, 0xc1, 0x6f, 0x0f, 0xfa, 0xd3, 0x0f, 0xe3, 0x73, 0x92, 0x62, 0x95, 0x62,
	0xb3, 0xc8, 0xbd, 0x72, 0xc7, 0xb0, 0x9f, 0x59, 0xa4, 0xf9, 0x92, 0x78, 0xb2, 0x46, 0xe5, 0x6a,
	0xd5, 0xbd, 0x82, 0xfc, 0x58, 0x73, 0xcc, 0x87, 0x5d, 0xc3, 0xad, 0xcd, 0x35, 0xc5, 0xf5, 0x7a,
	0x37, 0x98, 0xbd, 0x00, 0x10, 0x5c, 0xc5, 0x32, 0xe6, 0x0e, 0xed, 0xb0, 0x3d, 0x6a, 0x15, 0x03,
	0x36, 0x4c, 0xf0, 0x16, 0xfa, 0xa7, 0x98, 0xa2, 0xc3, 0xed, 0x7c, 0xef, 0xb3, 0x75, 0x72, 0x0e,
	0x7b, 0x45, 0xff, 0x54, 0x39, 0x24, 0xc5, 0x53, 0x76, 0x0a, 0xdd, 0x9b, 0xac, 0xd8, 0x61, 0x48,
	0x46, 0x84, 0xb7, 0x3f, 0x9a, 0x3f, 0xb8, 0x4d, 0x57, 0x91, 0x06, 0xbb, 0xd7, 0x57, 0x5e, 0xfb,
	0x9d, 0xf7, 0xda, 0x3b, 0xf9, 0xb3, 0x03, 0xbd, 0xa2, 0x34, 0xe1, 0x2a, 0x4e, 0x91, 0xd8, 0x19,
	0xc0, 0x26, 0x32, 0x56, 0xbd, 0xbf, 0x93, 0xa1, 0x3f, 0x08, 0xab, 0xf3, 0x09, 0x9b, 0xf3, 0x09,
	0xc7, 0xc5, 0xf9, 0x04, 0x4f, 0xaf, 0xaf, 0xbc, 0x27, 0x07, 0x9e, 0xdf, 0x83, 0xee, 0x0c, 0x6d,
	0x56, 0x5a, 0x67, 0xdf, 0x4b, 0xc9, 0x19, 0xda, 0xc2, 0x06, 0x0b, 0x1a, 0xc9, 0x9a, 0xb8, 0x98,
	0x4c, 0x0b, 0x5f, 0x65, 0x6b, 0x23, 0x7f, 0xfc, 0xdf, 0x9e, 0x7a, 0x87, 0x7f, 0xce, 0x3a, 0x03,
	0xd8, 0x44, 0x5b, 0xdb, 0xbf, 0x93, 0xf5, 0x83, 0xec, 0xbf, 0x7f, 0xf9, 0xed, 0x28, 0x91, 0xee,
	0x32, 0x5b, 0x84, 0x42, 0xaf, 0xa3, 0x54, 0xfe, 0xc4, 0x95, 0x74, 0xd5, 0x7f, 0x23, 0x74, 0x1a,
	0x91, 0x11, 0x8b, 0x4e, 0x89, 0xde, 0xfc, 0x0d, 0x00, 0x00, 0xff, 0xff, 0x4b, 0xf3, 0x54, 0x43,
	0x8c, 0x03, 0x00, 0x00,
}
